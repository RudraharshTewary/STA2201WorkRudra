"0","# Load necessary libraries"
"0","library(ggplot2)"
"0","library(MASS)  # For mvrnorm function"
"2","
Attaching package: â€˜MASSâ€™

"
"2","The following object is masked from â€˜package:dplyrâ€™:

    select

"
"0","# Set seed for reproducibility"
"0","set.seed(123)"
"0",""
"0","# Number of simulations"
"0","n_simulations <- 1000"
"0",""
"0","# True parameter values (you can adjust these based on your priors)"
"0","beta_1 <- 0.5"
"0","beta_2 <- 0.8"
"0","sigma <- 0.2"
"0",""
"0","# Simulate values of ð›½s and ðœŽ based on the priors"
"0","simulated_params <- mvrnorm(n = n_simulations, mu = c(beta_1, beta_2, sigma), Sigma = matrix(c(0.01, 0, 0, 0, 0.01, 0, 0, 0, 0.01), nrow = 3))"
"0",""
"0","# Extract simulated parameters"
"0","simulated_betas <- simulated_params[, 1:2]"
"0","simulated_sigma <- simulated_params[, 3]"
"0",""
"0","# Assuming you have a dataframe 'ds' with 'gest', 'birthweight', and 'preterm' columns"
"0","# Center and standardize gestational age"
"0","ds$gest_standardized <- scale(ds$gest, center = TRUE, scale = TRUE)"
"0",""
"0","# Simulate (log) birth weights based on Model 1 likelihood"
"0","simulated_log_weights <- matrix(NA, nrow = n_simulations, ncol = nrow(ds))"
"0","for (i in 1:n_simulations) {"
"0","  simulated_log_weights[i, ] <- simulated_betas[i, 1] + simulated_betas[i, 2] * ds$gest_standardized + rnorm(nrow(ds), mean = 0, sd = simulated_sigma[i])"
"0","}"
"2","Warning: NAs produced"
"2","Warning: NAs produced"
"2","Warning: NAs produced"
"2","Warning: NAs produced"
"2","Warning: NAs produced"
"2","Warning: NAs produced"
"2","Warning: NAs produced"
"2","Warning: NAs produced"
"2","Warning: NAs produced"
"2","Warning: NAs produced"
"2","Warning: NAs produced"
"2","Warning: NAs produced"
"2","Warning: NAs produced"
"2","Warning: NAs produced"
"2","Warning: NAs produced"
"2","Warning: NAs produced"
"2","Warning: NAs produced"
"2","Warning: NAs produced"
"2","Warning: NAs produced"
"0","# Plot the resulting distribution of simulated (log) birth weights"
"0","ggplot() +"
"0","  geom_density(aes(x = simulated_log_weights[ ,1]), fill = ""skyblue"", alpha = 0.5) +"
"0","  labs(title = ""Distribution of Simulated (log) Birth Weights"","
"0","       x = ""Simulated (log) Birth Weight"")"
